!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=23)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e){!function(){t.exports=this.wp.components}()},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){var n=r(20);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e){!function(){t.exports=this.wp.blocks}()},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){var n=r(15),a=r(16),o=r(17),i=r(19);t.exports=function(t,e){return n(t)||a(t,e)||o(t,e)||i()}},function(t,e){!function(){t.exports=this.wp.apiFetch}()},function(t,e){!function(){t.exports=this.wp.data}()},function(t,e,r){var n=r(21),a=r(22);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e){!function(){t.exports=this.wp.blockEditor}()},function(t){t.exports=JSON.parse('{"apiVersion":2,"name":"cwra-google-graph-block/graph-block","category":"widgets"}')},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}},function(t,e,r){var n=r(18);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,r){"use strict";r.r(e);var n=r(1),a=r(6),o=(r(7),r(8)),i=r.n(o),c=r(0),u=r(9),s=r.n(u),l=r(2),g=r(10),b={area:"Area Chart",bar:"Bar Chart",bubble:"Bubble Chart",candlestick:"Candlestick Chart",column:"Column Chart",combo:"Combo Chart",donut:"Donut Chart",gauge:"Gauge",geo:"Geo Chart",histogram:"Histogram",line:"Line Chart",org:"Org Chart",pie:"Pie Chart",scatter:"Scatter Chart",steppedarea:"Stepped Area Chart",table:"Table",timeline:"Timeline",treemap:"Tree Map"},f={fill:"white",stroke:"#666",strokeWidth:0},h={backgroundColor:"white",height:"auto",left:"auto",top:"auto",width:"auto"},p=r(4),d=r.n(p),w=r(11),y=r.n(w),v=r(5),m=r.n(v),O=r(3),j=r.n(O),_=r(12),C=r.n(_),x=r(13);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m()(t);if(e){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var k=function(t){d()(r,t);var e=E(r);function r(t){var n=t.attributes,a=t.setAttributes;return j()(this,r),e.call(this,{attributes:n,setAttributes:a})}return r}(function(t){d()(r,t);var e=E(r);function r(t){var n=t.attributes,a=t.setAttributes;return j()(this,r),e.call(this,{attributes:n,setAttributes:a})}return r}(function(){function t(e){j()(this,t);var r=e.attributes,n=r.cwraggBackgroundColor;this.cwraggBackgroundColor=void 0===n?f:n;var a=r.cwraggChartArea;this.cwraggChartArea=void 0===a?h:a;var o=r.cwraggEnableInteractivity;this.cwraggEnableInteractivity=void 0===o||o;var i=r.cwraggFontName;this.cwraggFontName=void 0===i?"Arial":i;var c=r.cwraggFontSize;this.cwraggFontSize=void 0===c?"":c;var u=r.cwraggTitle;this.cwraggTitle=void 0===u?"":u;var s=r.cwraggForcelFrame;this.cwraggForcelFrame=void 0!==s&&s;var l=r.cwraggHeight;this.cwraggHeight=void 0===l?720:l;var g=r.cwraggLegend;this.cwraggLegend=void 0===g?"":g;var b=r.cwraggTheme;this.cwraggTheme=void 0===b?"":b;var p=r.cwraggWidth;this.cwraggWidth=void 0===p?1200:p,this.setAttributes=e.setAttributes,this.sidebarElements=[]}return C()(t,[{key:"addMain",value:function(){var t=this;0===this.sidebarElements.length&&this.sidebarElements.push(Object(c.createElement)(l.PanelBody,{key:"cwraggbpicmain",title:Object(n.__)("Main Settings","cwraggb")},Object(c.createElement)(l.PanelRow,null,Object(c.createElement)(l.TextControl,{label:Object(n.__)("Title","cwraggb"),value:this.title,onChange:function(e){return t.title=e}})),Object(c.createElement)(l.PanelRow,null,Object(c.createElement)(l.TextControl,{label:Object(n.__)("Height","cwraggb"),value:this.height,onChange:function(e){return t.height=e}}),Object(c.createElement)(l.TextControl,{label:Object(n.__)("Width","cwraggb"),value:this.width,onChange:function(e){return t.width=e}}))))}},{key:"sidebarWrap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(x.InspectorControls,null,Object(c.createElement)(l.Panel,{header:Object(n.__)("Google Graph Settings","cwraggb")},t)))}},{key:"sidebar",value:function(){return this.addMain(),this.sidebarWrap(this.sidebarElements)}},{key:"height",get:function(){return this.cwraggHeight},set:function(t){this.setAttributes({cwraggHeight:t})}},{key:"title",get:function(){return this.cwraggTitle},set:function(t){this.setAttributes({cwraggTitle:t})}},{key:"width",get:function(){return this.cwraggWidth},set:function(t){this.setAttributes({cwraggWidth:t})}}]),t}())),S=function(t){d()(r,t);var e=E(r);function r(t){var n=t.attributes,a=t.setAttributes;return j()(this,r),e.call(this,{attributes:n,setAttributes:a})}return r}(k),T=function(t){d()(r,t);var e=E(r);function r(t){var n=t.attributes,a=t.setAttributes;return j()(this,r),e.call(this,{attributes:n,setAttributes:a})}return r}(k);var A=r(14).name,P={title:Object(n.__)("Google Graph Block","cwra-google-graph-block"),description:Object(n.__)("Display a graph using the Google Graph API","cwra-google-graph-block"),keywords:[Object(n._x)("graph","block keywords","cwra-google-graph-block"),Object(n._x)("chart","block keywords","cwra-google-graph-block")],icon:"chart-bar",category:"widgets",attributes:{cwraggBaseId:{type:"string"},cwraggChartType:{type:"string",default:"line"},cwraggDataSource:{type:"string",default:"remote-csv"},cwraggDataSourceType:{type:"string"},cwraggHeight:{type:"number"},cwraggLocalFile:{type:"string"},cwraggTitle:{type:"string"},cwraggWidth:{type:"number"}},example:{attributes:{cwragg_datasource:"Nothing to see here"}},edit:function(t){var e=t.attributes,r=(e.cwraggBaseId,e.cwraggChartType),a=(e.cwraggDataSourceType,e.cwraggDataSource),o=(e.cwraggLocalFile,e.cwraggTitle),u=e.cwraggUserCanEdit,f=t.clientId,h=t.setAttributes,p=t.attributes,d=Object(g.useDispatch)("core/notices").createErrorNotice,w=Object(c.useState)(!1),y=i()(w,2),v=y[0],m=y[1],O=wp.data.select("core/editor").getCurrentPostId();console.log("Post ID is ",O),h({cwraggBaseId:f});var j={};switch(r){case"line":j=new S({attributes:p,setAttributes:h});break;case"pie":j=new T({attributes:p,setAttributes:h});break;default:d(Object(n.sprintf)(Object(n.__)("Unknown chart type: %s. %s","cwraggb"),r,error.message),{id:"cwragg-instantiate-error",type:"snackbar"})}var _=[];if(b)for(var C in b)_.push({value:Object(n.__)(C,"cwraggb"),label:b[C]});function x(){m(!0),s()({path:"/cwraggb/v1/setremotedatasrc",method:"POST",data:{url:a,type:"remote-csv",postId:O}}).then((function(t){h({cwraggLocalFile:t})})).catch((function(t){d(Object(n.sprintf)(Object(n.__)("Could not validate data source. %s","cwraggb"),t.message),{id:"cwragg-validate-error",type:"snackbar"})})).finally((function(){m(!1)}))}return Object(c.createElement)(c.Fragment,null,j.sidebar(),Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"graph_settings"},Object(c.createElement)(l.SelectControl,{label:Object(n.__)("Chart Type","cwraggb"),value:r,options:_,onChange:function(t){h({cwraggChartType:t})}})),Object(c.createElement)((function(t){t.title,t.userCanEdit,t.chartType;var e=t.setAttributes;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",null,Object(c.createElement)("div",null,Object(c.createElement)(l.TextControl,{label:Object(n.__)("Data URL","cwraggb"),help:Object(n.__)("Enter the URL from which to get the data.","cwraggb"),value:a,onChange:function(t){e({cwraggDataSource:t})}}),Object(c.createElement)(l.Button,{onClick:x,label:Object(n.__)("Retrieve","cwraggb"),"aria-disabled":v,disabled:v,isPrimary:!0},"Retrieve"),v&&Object(c.createElement)(l.Spinner,null)),Object(c.createElement)(l.TextControl,{label:Object(n.__)("Horizontal Axis Title","cwraggb"),value:"",onChange:function(t){}})))}),{title:o,userCanEdit:u,chartType:r,setAttributes:h})))}};Object(a.registerBlockType)(A,P)}]);